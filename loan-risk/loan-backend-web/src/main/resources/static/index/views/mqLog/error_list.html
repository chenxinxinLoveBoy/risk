<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <!-- 		<title>Table</title> -->
    <link rel="stylesheet" href="../../plugins/layui/css/layui.css" media="all"/>
    <link rel="stylesheet" href="../../css/global.css" media="all">
    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/table.css"/>
    <link rel="stylesheet" href="../../css/lzh_xy_gl.css" media="all" />
     <style type="text/css">
    	.layui-form-item .layui-input-inline {
		    float: left;
		    width:53%;
		    margin-right: 10px;
		}
    </style>
</head>

<body>
<div class="admin-main">


    <blockquote class="layui-elem-quote">
        <form class="layui-form" style="margin-top: 0px;">
            <!-- 查询条件 -->
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 100px;">消息类型：</label>
                    <div class="layui-input-inline">
                        <select name="messageType" lay-filter="select" lay-search=""
                                id="messageType">
                            <option value="">直接选择或搜索选择</option>
                            <!--<option value="1">转发</option>-->
                            <!--<option value="2">广播</option>-->
                            <!--<option value="3">模糊匹配</option>-->
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 80px;">消息编号：</label>
                    <div class="layui-input-inline">
                        <input name="messageId" autocomplete="off" placeholder="消息编号" class="layui-input"
                               id="messageId">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 80px;">创建时间：</label>
                    <div class="layui-input-inline" style="width: 414px;">
                        <input name="optTimeBigen" lay-verify="required" required id="optTimeBigen" autocomplete="off"
                               class="layui-input" style="width: 190px; display:inline;">
                        &nbsp;至&nbsp;
                        <input name="optTimeEnd" lay-verify="required" required id="optTimeEnd" autocomplete="off"
                               class="layui-input" style="width: 190px; display:inline;">
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 100px;">消息管道类型：</label>
                    <div class="layui-input-inline">
                        <select name="messageChannelType" lay-filter="select" lay-search=""
                                id="messageChannelType">
                            <option value="">直接选择或搜索选择</option>
                            <!--<option value="0">发送</option>-->
                            <!--<option value="1">接收</option>-->
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 80px;">申请单号：</label>
                    <div class="layui-input-inline">
                        <input name="applicationId" autocomplete="off" placeholder="申请单号" class="layui-input"
                               id="applicationId">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 80px;">消息内容：</label>
                    <div class="layui-input-inline">
                        <input name="messageBody" autocomplete="off" placeholder="支持模糊查询" class="layui-input"
                               id="messageBody">
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 100px;">消息错误级别：</label>
                    <div class="layui-input-inline">
                        <select name="messageLevel" lay-filter="select" lay-search=""
                                id="messageLevel">
                            <option value="">直接选择或搜索选择</option>
                            <!--<option value="1">警告</option>-->
                            <!--<option value="2">业务处理错误</option>-->
                            <!--<option value="3">消息丢失</option>-->
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label" style="width: 80px;">消息状态：</label>
                    <div class="layui-input-inline">
                        <select name="messageStatus" lay-filter="select" lay-search=""
                                id="messageStatus">
                            <option value="">直接选择或搜索选择</option>
                            <!--<option value="0">正常</option>-->
                            <!--<option value="1">未消费</option>-->
                            <!--<option value="2">消费处理失败</option>-->
                        </select>
                    </div>
                </div>
                <button class="layui-btn layui-btn-small" lay-submit lay-filter="from"><i
                        class="layui-icon">&#xe615;</i> 搜索
                </button>
                <button type="reset" class="layui-btn layui-btn-small">重置条件</button>
            </div>
        </form>
    </blockquote>
    <fieldset class="layui-elem-field">
        <br>
        <a href="javascript:;" id="resend" class="layui-btn layui-btn-small" style="margin-left: 18px">重发</a>
        <a href="javascript:;" id="showMessage" class="layui-btn layui-btn-small" style="margin-left: 18px">查看消息详情</a>
        <br>
        <legend>数据列表</legend>
        <div class="layui-field-box layui-form">
            <table class="layui-table admin-table" style="word-break: keep-all;overflow:auto;">
                <thead>
                <tr>
                    <th style="width: 30px;"><input type="checkbox" lay-filter="allselector" lay-skin="primary"></th>
                    <th>序号</th>
                    <th>消息编号</th>
                    <th>申请单号</th>
                    <th>消息管道类型</th>
                    <th>消息交换机</th>
                    <th>消息路由键</th>
                    <th>消息队列名称</th>
                    <th>消息类型</th>
                    <th>消息所属业务</th>
                    <th>消息状态</th>
                    <th>消息错误级别</th>
                    <th>IP地址</th>
                    <th>是否删除</th>
                    <th>创建人</th>
                    <th style="min-width: 150px;">创建时间</th>
                </tr>
                </thead>
                <tbody id="content">
                </tbody>
            </table>
            <label>共<font color='red' id="count_page_number"></font>条记录</label>
            <div id="paged" class="page" style="display:inline-block;">
            </div>
        </div>
    </fieldset>

</div>
<!--模板-->
<script type="text/html" id="tpl">
    {{# layui.each(d.list, function(index, item){ }}
    <tr>
        <td><input type="checkbox" lay-skin="primary" data-id="{{ item.hsid }}"></td>
        <td>{{ index+1 }}
            <div name="messageDetails" style="display: none">
                <fieldset class="layui-elem-field" style=" width:800px;">
                    <legend>消息信息</legend>
                    <div class="layui-field-box" style="word-break:break-all">
                        {{ item.messageInfo }}
                    </div>
                </fieldset>
                <fieldset class="layui-elem-field" style=" width:800px;">
                    <legend>消息内容</legend>
                    <div class="layui-field-box" style="word-break:break-all">
                        {{ item.messageBody }}
                    </div>
                </fieldset>
            </div>
        </td>
        <td>{{ item.messageId }}</td>
        <td>{{ item.applicationId }}</td>
        <td>
            {{# if(item.messageChannelType === 0){ }}
            发送
            {{# } }}
            {{# if(item.messageChannelType === 1){ }}
            接收
            {{# } }}
        </td>
        <td>{{ item.messageExchange }}</td>
        <td>{{ item.messageRoutingkey }}</td>
        <td>{{ item.messageQueue }}</td>
        <td>
            {{# if(item.messageType === 1){ }}
            转发
            {{# } }}
            {{# if(item.messageType === 2){ }}
            广播
            {{# } }}
            {{# if(item.messageType === 3){ }}
            模糊匹配
            {{# } }}
        </td>
        <td>{{ item.messageService }}</td>
        <td>
            {{# if(item.messageStatus === 0){ }}
            正常
            {{# } }}
            {{# if(item.messageStatus === 1){ }}
            未消费
            {{# } }}
            {{# if(item.messageStatus === 2){ }}
            消费处理失败
            {{# } }}
        </td>
        <td>
            {{# if(item.messageLevel === 1){ }}
            警告
            {{# } }}
            {{# if(item.messageLevel === 2){ }}
            业务处理错误
            {{# } }}
            {{# if(item.messageLevel === 3){ }}
            消息丢失
            {{# } }}
        </td>
        <td>{{ item.ip }}</td>
        <td>
            {{# if(item.flagDel === 0){ }}
            未删除
            {{# } }}
            {{# if(item.flagDel === 1){ }}
            已删除
            {{# } }}
        </td>
        <td>{{ item.createMan }}</td>
        <td>{{ item.createTime }}</td>
    </tr>
    {{# }); }}
</script>

<!-- js -->
<script src="../../jqery/jquery.js"></script>
<script src="../../../commons/base.js"></script>
<script type="text/javascript" src="../../plugins/layui/layui.js"></script>
<script type="text/javascript" src="../../js/mqLog/error_list.js"></script>
</body>

</html>